name: Minify

on:
  push:
    branches:
      - main

jobs:
  minify:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout
        uses: actions/checkout@v2

      # Minify files (if only one file is passed output is named minified.js)
      - name: Minify files
        uses: dolfies/auto-minify@v1.1
        with:
          files: "main.js"

      # Auto commits minified files to the repository
      - name: Commit minified files
        uses: stefanzweifel/git-auto-commit-action@v4
        with:
          commit_message: "Create minified JS file"
          branch: ${{ github.ref }}
